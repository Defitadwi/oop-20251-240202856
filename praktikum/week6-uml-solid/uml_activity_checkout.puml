@startuml uml_activity_checkout
|Kasir|
start
:Login ke Sistem;
:Mulai Transaksi;
:Tambah produk ke keranjang;
:Konfirmasi Keranjang;
if (Stok cukup?) then (yes)
  :Hitung Total;
  partition Sistem {
    :Tampilkan total ke Kasir;
  }
  |Kasir|
  :Pilih metode pembayaran;
else (no)
  :Tampilkan error "stok tidak cukup";
  stop
endif

|Kasir|
:Masukkan pembayaran / pilih e-wallet;

alt Pembayaran Tunai
  partition Sistem {
    :Terima tunai;
    :Kembalian dihitung;
  }
else Pembayaran E-Wallet
  partition Sistem {
    :Kirim request ke Payment Gateway;
    if (Saldo/Capture success?) then (ok)
      :Terima notifikasi sukses;
    else (gagal)
      :Tampilkan error "pembayaran gagal";
      stop
    endif
  }
end

partition Sistem {
  :Buat record transaksi;
  :Cetak/Tampilkan struk;
}
stop
@enduml
